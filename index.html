
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Multi-Sport Live Headlines Ticker</title>
<style>
  body {
    margin: 0; background: #111; color: white; font-family: Arial, sans-serif;
    overflow: hidden;
  }
  #ticker {
    position: relative;
    height: 50px;
    border-top: 2px solid #444;
    border-bottom: 2px solid #444;
    overflow: hidden;
    padding: 0 20px;
    display: flex;
    align-items: center;
    font-weight: bold;
    font-size: 18px;
  }
  .label {
    font-weight: 900;
    color: #0af;
    margin-right: 15px;
    flex-shrink: 0;
  }
  #headlines {
    white-space: nowrap;
    overflow: hidden;
    flex-grow: 1;
  }
  #headlines span {
    display: inline-block;
    margin-right: 50px;
  }
  /* Scrolling animation */
  @keyframes scroll-left {
    0% { transform: translateX(100%); }
    100% { transform: translateX(-100%); }
  }
  #headlines.scrolling {
    animation: scroll-left 30s linear infinite;
  }
</style>
</head>
<body>
<div id="ticker">
  <span class="label">Sports News</span>
  <div id="headlines">Loading headlines...</div>
</div>

<script>
  const headlinesDiv = document.getElementById('headlines');

  // ESPN RSS feeds for multiple sports
  const rssFeeds = [
    'https://www.espn.com/espn/rss/nba/news',
    'https://www.espn.com/espn/rss/nfl/news',
    'https://www.espn.com/espn/rss/mlb/news',
    'https://www.espn.com/espn/rss/nhl/news'
  ];

  async function fetchFeed(url) {
    const response = await fetch('https://api.allorigins.win/get?url=' + encodeURIComponent(url));
    if (!response.ok) throw new Error('Network response was not ok');
    const data = await response.json();
    const parser = new DOMParser();
    const xmlDoc = parser.parseFromString(data.contents, "text/xml");
    const items = xmlDoc.querySelectorAll("item");
    const titles = [];
    for(let i=0; i<items.length; i++) {
      const title = items[i].querySelector("title").textContent;
      titles.push(title);
    }
    return titles;
  }

  async function fetchAllHeadlines() {
    try {
      let allHeadlines = [];
      for(const feed of rssFeeds) {
        const headlines = await fetchFeed(feed);
        allHeadlines = allHeadlines.concat(headlines);
      }
      // Limit to 40 headlines max
      allHeadlines = allHeadlines.slice(0,40);

      headlinesDiv.innerHTML = '';
      allHeadlines.forEach(h => {
        const span = document.createElement('span');
        span.textContent = h;
        headlinesDiv.appendChild(span);
      });

      // restart animation by removing and adding class
      headlinesDiv.classList.remove('scrolling');
      void headlinesDiv.offsetWidth; // trigger reflow
      headlinesDiv.classList.add('scrolling');
    } catch (e) {
      headlinesDiv.textContent = 'Failed to load headlines.';
      console.error(e);
    }
  }

  fetchAllHeadlines();
  setInterval(fetchAllHeadlines, 5 * 60 * 1000); // update every 5 mins
</script>
</body>
</html>
